<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/bootstrap.css">
    <link rel="manifest" href="/js/manifest.json">
    <!-- Local bootstrap.js-->

</head>
<style nonce="<%= nonce %>">
    /* Custom styles for the table container */
    .customContainer {
        float: right;
        margin-right: 3%;
    }
    .overflow-X {
        overflow-x: auto;
    }
    .width50{
        width:50%;
    }
    .width80{
        width:80%;
    }
    .maxw20{
        max-width:20%;
    }
    .table-responsive {
        width: 100%;
    }
    .table {
        width: 100%;
    }
</style>
<body>
    <div id="customRegisterWorker" class="custom-alert nodisplay">
        <h2><%= __('Successfully registered worker') %></h2>
    </div>
    <div id="customAdminPerms" class="custom-alert nodisplay">
        <h2><%= __('Successfully gave administrator permissions') %></h2>
    </div>
    <div>
        <div class="container my-4 customContainer bg-light rounded mx-80">
            <h2 class="text-center mb-4 text-white mt-3" id="TitleHeader"><%= __('Projects') %></h2>
            <div class="container-fluid">
                <div class="row">
                    <!-- Sidebar -->
                    <div class="col-lg-2 col-md-4 col-sm-12 bg-light rounded p-4 d-flex flex-column justify-content-start"
                        id="sidebar">
                        <h3 class="text-center mb-4 text-white "><%= __('Admin panel') %></h3>
                        <!-- Users Section -->
                        <h5 class="text-white text-center"><%= __('Users') %></h5>
                        <div class="d-grid gap-3 mb-4">
                            <button id="findUserByEmail" class="btn btn-outline-secondary text-white"><%= __('View user by Email') %></button>
                            <button id="findUserByID" class="btn btn-outline-secondary text-white"><%= __('View user by ID') %></button>
                            <button id="viewActiveUsers" class="btn btn-outline-secondary text-white"><%= __('View all active users') %></button>
                            <button id="viewAllUsers" class="btn btn-outline-secondary text-white"><%= __('View all users') %></button>
                            <button id="viewAdmins" class="btn btn-outline-secondary text-white"><%= __('View admins') %></button>
                            <button id="viewWorkers" class="btn btn-outline-secondary text-white"><%= __('View workers') %></button>
                            <button id="addWorkerForm" class="btn btn-outline-secondary text-white"><%= __('Add worker') %></button>
                        </div>

                        <!-- Divider -->
                        <hr class="text-white">

                        <!-- Projects Section -->
                        <h5 class="text-white text-center"><%= __('Projects') %></h5>
                        <div class="d-grid gap-3 mb-4">
                            <button id="findProjectByID" class="btn btn-outline-secondary text-white"><%= __('View projects by ID') %></button>
                            <button id="viewDelayedProjects" class="btn btn-outline-secondary text-white"><%= __('View delayed projects') %></button>
                            <button id="viewActiveProjects" class="btn btn-outline-secondary text-white"><%= __('View active projects') %></button>
                            <button id="viewFinishedProjects" class="btn btn-outline-secondary text-white"><%= __('View projects to be finished today') %></button>
                        </div>
                    </div>

                        <div id="ProjectDataContainer" class="table-responsive text-white nodisplay">
                            <table class="table table-bordered table-hover">
                                <thead class="thead-dark">
                                    <tr>
                                        <th class="align-middle" scope="col" data-column="idProject"><%= __('Project ID') %></th>
                                        <th class="align-middle" scope="col" data-column="idUser"><%= __('Username') %></th>
                                        <th class="align-middle" scope="col" data-column="StartDate"><%= __('Start Date') %></th>
                                        <th class="align-middle" scope="col" data-column="EndDateProjection"><%= __('Projected End Date') %></th>
                                        <th class="align-middle" scope="col" data-column="ProjectInfo"><%= __('Project Info') %></th>
                                        <th class="align-middle" scope="col" data-column="Status"><%= __('Overall status') %></th>
                                        <th class="align-middle" scope="col" data-column="Delayed"><%= __('Delay Status') %></th>
                                    </tr>
                                </thead>
                                <tbody id="project-table-body">
                                    <!-- Appointment data will be injected here -->
                                </tbody>
                            </table>
                        </div>

                        <div id="userDataContainer" class="table-responsive text-white nodisplay">
                            <table class="table table-bordered table-hover">
                                <thead class="thead-dark">
                                    <tr>
                                        <th class="align-middle" scope="col"><%= __('User ID') %></th>
                                        <th class="align-middle" scope="col"><%= __('Name') %></th>
                                        <th class="align-middle" scope="col"><%= __('Username') %></th>
                                        <th class="align-middle" scope="col"><%= __('Email') %></th>
                                        <th class="align-middle" scope="col"><%= __('Check Projects') %></th>
                                    </tr>
                                </thead>
                                <tbody id="user-table-body">
                                    <!-- Appointment data will be injected here -->
                                </tbody>
                            </table>
                        </div>

                        <div id="adminDataContainer" class="table-responsive text-white nodisplay">
                            <table class="table table-bordered table-hover">
                                <thead class="thead-dark">
                                    <tr>
                                        <th class="align-middle" scope="col"><%= __('Admin ID') %></th>
                                        <th class="align-middle" scope="col"><%= __('Name') %></th>
                                        <th class="align-middle" scope="col"><%= __('Username') %></th>
                                        <th class="align-middle" scope="col"><%= __('Email') %></th>
                                        <th class="align-middle" scope="col"><%= __('Tenure') %></th>
                                        <th class="align-middle" scope="col"><%= __('AdminTenure') %></th>
                                        <th class="align-middle" scope="col"><%= __('Worker type') %></th>
                                        <th class="align-middle" scope="col"><%= __('Manage administrator status') %></th>
                                    </tr>
                                </thead>
                                <tbody id="admin-table-body">
                                    <!-- Appointment data will be injected here -->
                                </tbody>
                            </table>
                        </div>

                        <div id="workerDataContainer" class="table-responsive text-white nodisplay">
                            <table class="table table-bordered table-hover">
                                <thead class="thead-dark">
                                    <tr>
                                        <th class="align-middle" scope="col"><%= __('Worker ID') %></th>
                                        <th class="align-middle" scope="col"><%= __('Name') %></th>
                                        <th class="align-middle" scope="col"><%= __('Username') %></th>
                                        <th class="align-middle" scope="col"><%= __('Email') %></th>
                                        <th class="align-middle" scope="col"><%= __('Tenure') %></th>
                                        <th class="align-middle" scope="col"><%= __('Worker type') %></th>
                                        <th class="align-middle" scope="col"><%= __('Manage administrator status') %></th>
                                    </tr>
                                </thead>
                                <tbody id="worker-table-body">
                                    <!-- Appointment data will be injected here -->
                                </tbody>
                            </table>
                        </div>

                        <div id="inputNewEndDate" class="table-responsive bg-light overflow-X nodisplay">
                            <table class="table table-bordered table-hover">
                                <thead class="thead-dark">
                                    <tr>
                                        <th colspan="2" class="text-center text-white">
                                            <%= __('Choose the new end date for project: ID_') %><span id="project_id"></span>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="align-middle text-white width50">
                                            <p><strong><%= __('!WARNING!') %></strong></p>
                                            <p><%= __('If the project isn\'t yet tagged as delayed, it will be after any changes to the enddatetime.') %></p>
                                        </td>
                                        <td class="align-middle width50">
                                            <div class="d-flex flex-column align-items-center">
                                                <input class="width80" type="datetime-local" id="dateinput"
                                                    class="form-control text-center mb-2">
                                                <button id="changeEndTimeButton" class="btn btn-outline-primary mt-2"><%= __('Change') %></button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr id="InvalidDateTime" class="nodisplay">
                                        <td colspan="2" class="text-center">
                                            <span class="text-danger"><b><%= __('Invalid end time') %></b></span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div id="searchUser" class="col-sm-3 m-auto text-center nodisplay pb-4">
                            <span id="InvalidID" class="nodisplay text-danger"><b><%= __('Invalid ID') %></b></span>
                            <input type="text" id="userIDInput" class="form-control" placeholder="<%= __('Enter User ID') %>">
                            <button class="btn btn-outline-primary mt-2" id="searchUserButton"><%= __('Search') %></button>
                        </div>

                        <div id="searchUserByEmail" class="col-sm-4 m-auto text-center nodisplay pb-4">
                            <span id="InvalidEmail" class="nodisplay text-danger"><b><%= __('Invalid Email') %></b></span>
                            <input type="text" id="userEmailInput" class="form-control" placeholder="<%= __('Enter User\'s email') %>">
                            <button class="btn btn-outline-primary mt-2" id="searchUserByEmailButton"><%= __('Search') %></button>
                        </div>

                        <div id="searchProject" class="col-sm-3 m-auto text-center nodisplay pb-4">
                            <span id="InvalidProjectID" class="nodisplay text-danger"><b><%= __('Invalid ID') %></b></span>
                            <input type="text" id="ProjectIDInput" class="form-control" placeholder="<%= __('Enter Project ID') %>">
                            <button class="btn btn-outline-primary mt-2" id="searchProjectButton"><%= __('Search') %></button>
                        </div>

                        <div class="col-md-3 bg-light rounded text-white m-auto nodisplay maxw20" id="registrationForm">
                            <form class="mt-3">
                                <label id="email-red" for="email"><%= __('Email') %>:</label>
                                <span class="ml-1 nodisplay text-danger" id="NoAccount"><b>- <%= __('Account doesn\'t exist') %></b></span>
                                <span class="ml-1 nodisplay text-danger" id="WorkerExsists"><b>- <%= __('User is already a worker') %></b></span>
                                <input class="form-control" type="email" id="email" name="email" required><br>

                                <label for="workerType"><%= __('Worker Type') %>:</label>
                                <input class="form-control" type="text" id="workerType" name="workerType" maxlength="45" required><br>

                                <input class="mt-3" type="checkbox" id="administrator" name="administrator">
                                <label for="administrator">
                                    <%= __('Administrator') %>
                                </label><br>

                                <button id="submitButton" class="btn btn-secondary btn-block mt-2 mb-4" type="submit">
                                    <%= __('Register worker') %>
                                </button>
                            </form>
                        </div>
                    </div>
            </div>
        </div>

        <script nonce="<%= nonce %>">const csrfToken = "<%= csrfToken %>";</script>
        <script src="/js/Admin.js" nonce="<%= nonce %>"></script>
</body>

</html>